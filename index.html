<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<title>EcoMemória</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #eaf5ea;
    text-align: center;
    margin: 0; padding: 0;
  }
  header, nav {
    background: #2f6b2f;
    color: white;
    padding: 15px 0;
  }
  nav a {
    color: white;
    margin: 0 15px;
    text-decoration: none;
    font-weight: bold;
  }
  nav a:hover {
    text-decoration: underline;
  }
  #treeContainer {
    margin: 30px auto;
    width: 320px;
  }
  #uploadArea {
    margin: 20px auto;
  }
  button {
    background: #2f6b2f;
    color: white;
    border: none;
    padding: 10px 25px;
    border-radius: 6px;
    cursor: pointer;
  }
  button:hover {
    background: #245524;
  }
  svg circle {
    transition: opacity 0.5s ease, r 0.5s ease;
  }
</style>
</head>
<body>

<header>
  <h1>EcoMemória</h1>
  <h2>Viagens que Reflorestam Pessoas</h2>
</header>

<nav>
  <a href="index.html">Início</a>
   <a href="publicar.html">Publicar</a>
  <a href="memorias.html">Memórias</a>
  <a href="sobre.html">Sobre</a>

</nav>

<div id="treeContainer">
  <svg width="300" height="350" viewBox="0 0 200 300" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Árvore crescendo">
    <!-- Tronco -->
    <rect x="95" y="150" width="15" height="120" fill="#8b5a2b" />
    <!-- Folhas -->
    <circle id="leaf1" cx="100" cy="140" r="20" fill="#3fa34d" opacity="0.2" />
    <circle id="leaf2" cx="80" cy="120" r="25" fill="#47b35a" opacity="0.2" />
    <circle id="leaf3" cx="120" cy="120" r="25" fill="#47b35a" opacity="0.2" />
    <circle id="leaf4" cx="60" cy="100" r="28" fill="#5cc46b" opacity="0.2" />
    <circle id="leaf5" cx="140" cy="100" r="28" fill="#5cc46b" opacity="0.2" />
    <circle id="leaf6" cx="100" cy="75" r="35" fill="#6ddf7c" opacity="0.2" />
  </svg>
</div>

<div id="uploadArea">
  <input type="file" id="photoInput" accept="image/*" />
  <br><br>
  <button id="uploadBtn">Enviar Foto</button>
</div>

<script>
  // Pega array do localStorage ou cria vazio
  let fotos = JSON.parse(localStorage.getItem('fotos') || '[]');

  // Função para atualizar a árvore conforme número de fotos
  function atualizarArvore() {
    const total = fotos.length;
    for(let i=1; i<=6; i++) {
      const leaf = document.getElementById('leaf' + i);
      if (!leaf) continue;
      // Cada folha "liga" a cada 2 fotos enviadas
      if(total >= i * 1) {
        leaf.style.opacity = '1';
        leaf.setAttribute('r', 20 + (i-1) * 5);
      } else {
        leaf.style.opacity = '0.2';
        leaf.setAttribute('r', 20);
      }
    }
  }

  // Função para enviar foto e salvar no localStorage
  function uploadPhoto() {
    const input = document.getElementById('photoInput');
    if(input.files.length === 0) {
      alert('Selecione uma foto antes de enviar!');
      return;
    }

    const file = input.files[0];
    const reader = new FileReader();

    reader.onload = function(e) {
      fotos.push({ src: e.target.result, titulo: '', legenda: '' });
      localStorage.setItem('fotos', JSON.stringify(fotos));
      alert('Foto enviada! Você pode adicionar título e legenda na página Publicar.');
      atualizarArvore();
      input.value = '';
    };

    reader.readAsDataURL(file);
  }

  // Evento do botão
  document.getElementById('uploadBtn').addEventListener('click', uploadPhoto);

  // Atualiza árvore ao carregar
  atualizarArvore();
</script>

</body>
</html>
